<div align="center">
  <img src="logo.png" alt="BiliBrief" width="100" height="100" style="border-radius: 20px;" />
  <h1>BiliBrief è§†é¢‘çºªè¦</h1>
  <p><b>ä¸¢ä¸ªBç«™é“¾æ¥ï¼ŒAI å¸®ä½ ç§’å‡ºç²¾åæ€»ç»“</b></p>

  <br/>

  <img src="https://img.shields.io/badge/version-v1.0.0-blue" />
  <img src="https://img.shields.io/badge/AstrBot-v4.0+-green" />
  <img src="https://img.shields.io/badge/platform-Bilibili-ff69b4" />
  <img src="https://img.shields.io/badge/license-MIT-orange" />
</div>

<br/>

> **ğŸ‡¨ğŸ‡³ [ä¸­æ–‡](#-ä¸­æ–‡æ–‡æ¡£)** &nbsp;|&nbsp; **ğŸ‡¬ğŸ‡§ [English](#-english-documentation)**

---

# ğŸ‡¨ğŸ‡³ ä¸­æ–‡æ–‡æ¡£

## ğŸ“– ç®€ä»‹

**BiliBrief** æ˜¯ä¸€æ¬¾è¿è¡Œåœ¨ [AstrBot]((https://astrbot.app/)) ä¸Šçš„ Bç«™è§†é¢‘æ€»ç»“æ’ä»¶ã€‚

ä½ åªéœ€è¦ä¸¢ä¸€ä¸ªBç«™è§†é¢‘é“¾æ¥ï¼Œæ’ä»¶å°±ä¼šè‡ªåŠ¨ä¸‹è½½éŸ³é¢‘ã€æå–å­—å¹•ã€è°ƒç”¨ AI å¤§æ¨¡å‹ï¼Œç”Ÿæˆä¸€ä»½ç»“æ„åŒ–çš„è§†é¢‘æ€»ç»“ â€”â€” å¹¶æ¸²æŸ“æˆç²¾ç¾çš„æš—è‰²ä¸»é¢˜å¡ç‰‡å›¾ç‰‡å‘é€åˆ°ç¾¤èŠã€‚

ä¸ä»…å¦‚æ­¤ï¼Œä½ è¿˜å¯ä»¥ **è®¢é˜… UP ä¸»**ï¼Œæ–°è§†é¢‘å‘å¸ƒæ—¶è‡ªåŠ¨æ¨é€æ€»ç»“åˆ°ç¾¤é‡Œï¼Œå†ä¹Ÿä¸æ€•é”™è¿‡å–œæ¬¢çš„ UP çš„å†…å®¹äº†ã€‚

## ğŸ† BiliBrief

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| ğŸ¨ **å›¾ç‰‡æ¸²æŸ“è¾“å‡º** | æ€»ç»“æ¸²æŸ“ä¸ºåŒæ æš—è‰²å¡ç‰‡å›¾ç‰‡ï¼Œæ¸…æ™°ç¾è§‚ |
| ğŸ§  **ä¸‰ç§æ€»ç»“é£æ ¼** | ç®€æ´ / è¯¦ç»† / ä¸“ä¸šï¼Œé€‚ç”¨äºä¸åŒåœºæ™¯ |
| ğŸ“¡ **è®¢é˜…è‡ªåŠ¨æ¨é€** | è®¢é˜… UP ä¸»ï¼Œæ–°è§†é¢‘è‡ªåŠ¨æ¨é€æ€»ç»“ |
| ğŸ” **å¤šæ ¼å¼è¾“å…¥** | æ”¯æŒå®Œæ•´é“¾æ¥ã€çŸ­é“¾ã€BVå·ã€UIDã€ç©ºé—´é“¾æ¥ã€UPä¸»æ˜µç§° |
| â±ï¸ **æ—¶é—´æˆ³æ ‡è®°** | æ€»ç»“ä¸­æ ‡æ³¨è§†é¢‘å¯¹åº”æ—¶é—´ç‚¹ï¼Œä¾¿äºè·³è½¬å®šä½ |
| ğŸ” **æ‰«ç ç™»å½•** | åœ¨èŠå¤©ä¸­æ‰«ç ç™»å½•Bç«™ï¼Œæ— éœ€æ‰‹åŠ¨å¡«å†™ Cookie |
| ğŸ›¡ï¸ **ç¾¤èŠæƒé™æ§åˆ¶** | æ”¯æŒé»‘åå• / ç™½åå•æ¨¡å¼ |

## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚

- [AstrBot]((https://astrbot.app/)) v4.0+
- å·²é…ç½®è‡³å°‘ä¸€ä¸ª LLM Providerï¼ˆå¦‚ DeepSeekã€OpenAI ç­‰ï¼‰

### æ­¥éª¤

**1. å®‰è£…æ’ä»¶**

åœ¨ AstrBot ç®¡ç†é¢æ¿ â†’ æ’ä»¶ç®¡ç† â†’ ä¸Šä¼ æ’ä»¶ zip åŒ…

**2. å®‰è£…ç³»ç»Ÿä¾èµ–**

```bash
# FFmpegï¼ˆå¿…é¡» â€” ç”¨äºéŸ³é¢‘å¤„ç†ï¼‰
apt install -y ffmpeg

# wkhtmltopdfï¼ˆå¼€å¯å›¾ç‰‡è¾“å‡ºæ—¶éœ€è¦ï¼‰
apt install -y wkhtmltopdf
```

**3. ç™»å½•Bç«™**

åœ¨èŠå¤©ä¸­å‘é€ï¼š
```
/Bç«™ç™»å½•
```
ç”¨Bç«™ App æ‰«æå¼¹å‡ºçš„äºŒç»´ç å³å¯ã€‚

**4. å¼€å§‹ä½¿ç”¨ ğŸ‰**
```
/æ€»ç»“ https://www.bilibili.com/video/BV1xx411c7mD
```

## ğŸ”§ å‘½ä»¤ä¸€è§ˆ

### åŸºç¡€å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/æ€»ç»“å¸®åŠ©` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯å’Œå½“å‰ç™»å½•çŠ¶æ€ |
| `/æ€»ç»“ <è§†é¢‘é“¾æ¥>` | ä¸ºæŒ‡å®šè§†é¢‘ç”Ÿæˆ AI æ€»ç»“ |
| `/æœ€æ–°è§†é¢‘ <UPä¸»>` | è·å– UP ä¸»æœ€æ–°è§†é¢‘å¹¶ç”Ÿæˆæ€»ç»“ |

### ç™»å½•ç®¡ç†

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/Bç«™ç™»å½•` | æ‰«ç ç™»å½• Bç«™ |
| `/Bç«™ç™»å‡º` | é€€å‡ºBç«™ç™»å½• |

### è®¢é˜…ç®¡ç†

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/è®¢é˜… <UPä¸»>` | è®¢é˜… UP ä¸»ï¼Œæ–°è§†é¢‘è‡ªåŠ¨æ¨é€æ€»ç»“ |
| `/å–æ¶ˆè®¢é˜… <UPä¸»>` | å–æ¶ˆè®¢é˜… |
| `/è®¢é˜…åˆ—è¡¨` | æŸ¥çœ‹å½“å‰è®¢é˜… |
| `/æ£€æŸ¥æ›´æ–°` | æ‰‹åŠ¨æ£€æŸ¥ UP ä¸»æ–°è§†é¢‘ |

> **ğŸ’¡ æç¤º**ï¼š`<UPä¸»>` æ”¯æŒå¤šç§æ ¼å¼ â€”â€” çº¯æ•°å­— UIDã€ç©ºé—´é“¾æ¥ã€æˆ–è€…ç›´æ¥è¾“å…¥ UP ä¸»æ˜µç§°ã€‚

### æ¨é€ç›®æ ‡

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/æ·»åŠ æ¨é€ç¾¤ <ç¾¤å·>` | å°† QQ ç¾¤åŠ å…¥æ¨é€åˆ—è¡¨ |
| `/æ·»åŠ æ¨é€å· <QQå·>` | å°† QQ å·åŠ å…¥æ¨é€åˆ—è¡¨ |
| `/æ¨é€åˆ—è¡¨` | æŸ¥çœ‹å½“å‰æ¨é€ç›®æ ‡ |
| `/ç§»é™¤æ¨é€ <ç¾¤å·æˆ–QQå·>` | ç§»é™¤æ¨é€ç›®æ ‡ |
| `/é£ä¹¦å‘å¸ƒçŠ¶æ€` | æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡é£ä¹¦å‘å¸ƒç»“æœ |

> **ğŸ’¡ æç¤º**ï¼šè®¾ç½®æ¨é€ç›®æ ‡åï¼Œæ‰€æœ‰è®¢é˜…çš„æ–°è§†é¢‘æ€»ç»“å°†**åªæ¨é€åˆ°æŒ‡å®šçš„ç¾¤/ç”¨æˆ·**ï¼Œè€Œä¸æ˜¯å‘èµ·è®¢é˜…çš„ç¾¤ã€‚æœªè®¾ç½®æ—¶é»˜è®¤æ¨é€åˆ°è®¢é˜…æ¥æºç¾¤ã€‚

### ä½¿ç”¨ç¤ºä¾‹

```
/æ€»ç»“ https://www.bilibili.com/video/BV1xx411c7mD
/æ€»ç»“ BV1xx411c7mD
/æœ€æ–°è§†é¢‘ æŸUPä¸»çš„åå­—
/è®¢é˜… 123456789
/æ·»åŠ æ¨é€ç¾¤ 123456789
/æ·»åŠ æ¨é€å· 987654321
/æ¨é€åˆ—è¡¨
/ç§»é™¤æ¨é€ 123456789
```

## âš™ï¸ é…ç½®é¡¹

åœ¨ AstrBot ç®¡ç†é¢æ¿ â†’ æ’ä»¶é…ç½®ä¸­å¯è®¾ç½®ï¼š

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `output_image` | `true` | æ€»ç»“ä»¥å›¾ç‰‡å½¢å¼å‘é€ |
| `note_style` | `professional` | æ€»ç»“é£æ ¼ï¼š`concise` / `detailed` / `professional` |
| `enable_link` | `true` | åµŒå…¥æ—¶é—´æˆ³æ ‡è®° |
| `enable_summary` | `true` | æœ«å°¾æ·»åŠ  AI æ€»ç»“æ®µè½ |
| `download_quality` | `fast` | éŸ³é¢‘è´¨é‡ï¼š`fast` / `medium` / `slow` |
| `enable_auto_push` | `false` | å¯ç”¨è‡ªåŠ¨æ¨é€æ–°è§†é¢‘æ€»ç»“ |
| `check_interval_minutes` | `600` | å®šæ—¶æ£€æŸ¥é—´éš”ï¼ˆåˆ†é’Ÿï¼‰ |
| `max_subscriptions` | `20` | æ¯ä¸ªç¾¤æœ€å¤§è®¢é˜…æ•° |
| `max_note_length` | `3000` | æ€»ç»“æœ€å¤§å­—ç¬¦æ•° |
| `push_groups` | ç©º | æ¨é€QQç¾¤åˆ—è¡¨ï¼Œé€—å·åˆ†éš” |
| `push_users` | ç©º | æ¨é€QQå·åˆ—è¡¨ï¼Œé€—å·åˆ†éš” |
| `enable_feishu_wiki_push` | `true` | å¯ç”¨é£ä¹¦çŸ¥è¯†åº“æ¨é€ï¼ˆé»˜è®¤å¼€å¯ï¼‰ |
| `feishu_push_on_manual` | `true` | æ‰‹åŠ¨æ€»ç»“æ—¶åŒæ­¥æ¨é€é£ä¹¦ |
| `feishu_push_on_auto` | `true` | è®¢é˜…è‡ªåŠ¨æ¨é€æ—¶åŒæ­¥æ¨é€é£ä¹¦ |
| `feishu_app_id` | ç©º | é£ä¹¦åº”ç”¨ App ID |
| `feishu_app_secret` | ç©º | é£ä¹¦åº”ç”¨ App Secret |
| `feishu_wiki_space_id` | ç©º | é£ä¹¦çŸ¥è¯†åº“ Space ID |
| `feishu_parent_node_token` | ç©º | é£ä¹¦çŸ¥è¯†åº“çˆ¶èŠ‚ç‚¹ Tokenï¼ˆå¯é€‰ï¼‰ |
| `feishu_title_prefix` | `BiliBriefçºªè¦` | é£ä¹¦æ–‡æ¡£æ ‡é¢˜å‰ç¼€ |
| `feishu_domain` | `feishu` | é£ä¹¦é“¾æ¥åŸŸåï¼š`feishu` / `lark` |
| `access_mode` | `blacklist` | ç¾¤èŠè®¿é—®æ§åˆ¶æ¨¡å¼ |
| `group_list` | ç©º | ç¾¤å·åˆ—è¡¨ï¼Œé€—å·åˆ†éš” |
| `debug_mode` | `false` | å¯ç”¨è°ƒè¯•æ—¥å¿— |

> âš ï¸ é£ä¹¦æ¨é€é»˜è®¤å¼€å¯ï¼Œä½†è‹¥æœªå¡«å†™ `feishu_app_id` / `feishu_app_secret` / `feishu_wiki_space_id`ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨è·³è¿‡é£ä¹¦æ¨é€ï¼Œä¸å½±å“åŸæœ‰åŠŸèƒ½ã€‚
>
> ğŸ§© é£ä¹¦å¯Œæ–‡æœ¬å‘å¸ƒï¼ˆå½“å‰æ”¯æŒï¼‰ï¼šæ ‡é¢˜ã€æ®µè½ã€æ— åº/æœ‰åºåˆ—è¡¨ã€å¼•ç”¨ã€åˆ†å‰²çº¿ã€å›´æ ä»£ç å—ã€è¡Œå†…åŠ ç²—/æ–œä½“/åˆ é™¤çº¿/è¡Œå†…ä»£ç ã€è¡Œå†…/å—çº§å…¬å¼ã€é“¾æ¥é™çº§æ–‡æœ¬ã€ç½‘ç»œå›¾ç‰‡ï¼ˆ`![alt](https://...)` è‡ªåŠ¨ä¸Šä¼ ç»‘å®šï¼‰ã€‚

## ğŸ“‹ ç³»ç»Ÿä¾èµ–

| ä¾èµ– | ç±»å‹ | ç”¨é€” |
|------|------|------|
| **FFmpeg** | ç³»ç»Ÿ | éŸ³é¢‘ä¸‹è½½å¤„ç† (**å¿…é¡»**) |
| **wkhtmltopdf** | ç³»ç»Ÿ | å›¾ç‰‡æ¸²æŸ“ (å¼€å¯å›¾ç‰‡è¾“å‡ºæ—¶éœ€è¦) |
| yt-dlp | Python | Bç«™è§†é¢‘/éŸ³é¢‘ä¸‹è½½ |
| aiohttp | Python | å¼‚æ­¥ HTTP è¯·æ±‚ |
| requests | Python | HTTP è¯·æ±‚ |
| markdown | Python | Markdown â†’ HTML |
| imgkit | Python | HTML â†’ å›¾ç‰‡ |

> Python ä¾èµ–ä¼šåœ¨æ’ä»¶å®‰è£…æ—¶è‡ªåŠ¨å®‰è£…ã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

- é¦–æ¬¡ä½¿ç”¨å¿…é¡»å…ˆæ‰§è¡Œ `/Bç«™ç™»å½•`
- éœ€è¦åœ¨ AstrBot ä¸­é…ç½®å¥½ LLM Provider
- è§†é¢‘æ€»ç»“ç”Ÿæˆçº¦éœ€ 1-3 åˆ†é’Ÿ
- å›¾ç‰‡æ¸²æŸ“å¤±è´¥æ—¶ä¼šè‡ªåŠ¨å›é€€åˆ°çº¯æ–‡æœ¬

## ğŸ” è‡´è°¢

æœ¬æ’ä»¶çš„æ ¸å¿ƒæ€»ç»“æµç¨‹ï¼ˆéŸ³é¢‘ä¸‹è½½ã€å­—å¹•è·å–ã€Prompt æ„å»ºï¼‰å‚è€ƒäº† **[BiliNote](https://github.com/JefferyHcool/BiliNote)** (by JefferyHcool)ã€‚

---

# ğŸ‡¬ğŸ‡§ English Documentation

## ğŸ“– Introduction

**BiliBrief** is an AstrBot plugin that generates AI-powered summaries for Bilibili videos.

Just send a Bilibili video link to your chat, and the plugin will automatically download the audio, extract subtitles, call your configured LLM, and generate a beautifully formatted summary â€” rendered as a stunning dark-themed card image.

You can also **subscribe to content creators** and receive automatic summary pushes whenever they upload new videos.

## ğŸ† BiliBrief

| Advantage | Description |
|-----------|-------------|
| ğŸ¨ **Image Rendering** | Summaries rendered as dual-column dark-themed card images |
| ğŸ§  **3 Summary Styles** | Concise / Detailed / Professional for different scenarios |
| ğŸ“¡ **Auto Push** | Subscribe to creators, get summaries pushed automatically |
| ğŸ” **Multi-format Input** | Accepts full URLs, short links, BV IDs, UIDs, space links, or creator names |
| â±ï¸ **Timestamps** | Key moments marked with video timestamps for quick navigation |
| ğŸ” **QR Login** | Login to Bilibili by scanning a QR code in chat |
| ğŸ›¡ï¸ **Access Control** | Blacklist / whitelist modes |

## ğŸ“¦ Installation

### Prerequisites

- [AstrBot]((https://astrbot.app/)) v4.0+
- At least one LLM Provider configured (e.g., DeepSeek, OpenAI)

### Steps

**1. Install the Plugin**

Upload the plugin zip in AstrBot Admin â†’ Plugin Management â†’ Restart AstrBot

**2. Install System Dependencies**

```bash
# FFmpeg (required â€” for audio processing)
apt install -y ffmpeg

# wkhtmltopdf (required for image output)
apt install -y wkhtmltopdf
```

**3. Login to Bilibili**

Send in chat:
```
/Bç«™ç™»å½•
```
Scan the QR code with the Bilibili mobile app.

**4. Start Using ğŸ‰**
```
/æ€»ç»“ https://www.bilibili.com/video/BV1xx411c7mD
```

## ğŸ”§ Commands

| Command | Description |
|---------|-------------|
| `/æ€»ç»“å¸®åŠ©` | Show help info and login status |
| `/æ€»ç»“ <video URL>` | Generate AI summary for a video |
| `/æœ€æ–°è§†é¢‘ <creator>` | Get latest video from a creator and summarize |
| `/Bç«™ç™»å½•` | QR code login to Bilibili |
| `/Bç«™ç™»å‡º` | Logout from Bilibili |
| `/è®¢é˜… <creator>` | Subscribe to a creator for auto push |
| `/å–æ¶ˆè®¢é˜… <creator>` | Unsubscribe |
| `/è®¢é˜…åˆ—è¡¨` | View subscription list |
| `/æ£€æŸ¥æ›´æ–°` | Manually check for new videos |
| `/æ·»åŠ æ¨é€ç¾¤ <group ID>` | Add a QQ group as push target |
| `/æ·»åŠ æ¨é€å· <QQ ID>` | Add a QQ user as push target |
| `/æ¨é€åˆ—è¡¨` | View push targets |
| `/ç§»é™¤æ¨é€ <ID>` | Remove a push target |
| `/é£ä¹¦å‘å¸ƒçŠ¶æ€` | View latest Feishu publish result |

> **ğŸ’¡ Tip**: `<creator>` accepts numeric UID, space link URL, or creator nickname.
> When push targets are configured, summaries are sent **only** to those targets.

## âš™ï¸ Configuration

| Option | Default | Description |
|--------|---------|-------------|
| `output_image` | `true` | Send summary as image |
| `note_style` | `professional` | Style: `concise` / `detailed` / `professional` |
| `enable_auto_push` | `false` | Enable automatic new video push |
| `check_interval_minutes` | `600` | Check interval in minutes |
| `max_subscriptions` | `20` | Max subscriptions per group |
| `download_quality` | `fast` | Audio quality: `fast` / `medium` / `slow` |
| `push_groups` | empty | Push target QQ groups, comma-separated |
| `push_users` | empty | Push target QQ users, comma-separated |
| `enable_feishu_wiki_push` | `true` | Enable Feishu Wiki push (enabled by default) |
| `feishu_push_on_manual` | `true` | Push to Feishu on manual summary |
| `feishu_push_on_auto` | `true` | Push to Feishu on auto subscription push |
| `feishu_app_id` | empty | Feishu app ID |
| `feishu_app_secret` | empty | Feishu app secret |
| `feishu_wiki_space_id` | empty | Feishu wiki space ID |
| `feishu_parent_node_token` | empty | Feishu parent node token (optional) |
| `feishu_title_prefix` | `BiliBriefçºªè¦` | Feishu document title prefix |
| `feishu_domain` | `feishu` | Feishu link domain: `feishu` / `lark` |
| `access_mode` | `blacklist` | Group access control mode |
| `debug_mode` | `false` | Enable debug logging |

## âš ï¸ Notes

- Must run `/Bç«™ç™»å½•` before first use
- Requires an LLM Provider configured in AstrBot
- Summary generation takes ~1-3 minutes per video
- Falls back to plain text if image rendering fails

## ğŸ” Credits

Core summarization flow (audio download, subtitle extraction, prompt building) is based on **[BiliNote](https://github.com/JefferyHcool/BiliNote)** by JefferyHcool.

---
